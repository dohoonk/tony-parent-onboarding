# Parent Onboarding AI — Discovery Notes

## 1. Current Onboarding Flow (Observed)
1. Website CTA → Parent enters onboarding
2. Parent + Student demographic input
3. Consent & agreements
4. Insurance card upload / manual entry
5. Intake narrative questions (family history, goals, relationships)
6. Clinical screeners (PHQ/GAD style questions)
7. Scheduling availability selection

**Primary structure:** Linear multi-step flow, but emotionally and cognitively heavy.

---

## 2. Key Pain Points
| Area | Pain | Impact |
|------|------|--------|
| Emotional overwhelm | Parent must articulate sensitive concerns early | Causes hesitation, emotional shutdown
| Clinical language / diagnostic tone | PHQ/GAD questions feel medical and intimidating | Increases stress + defensiveness
| Insurance submission | Manual data entry, unclear cost expectations | **50%+ drop-off point**
| Lack of reassurance | No tone or guidance that parent is doing the right thing | Reduces confidence + follow-through
| No progress context | Parent doesn't know how long the process is | Increases perceived effort time
| End state unclear | No clear “what happens next” | Parent leaves feeling unsure, reduces show-up rate

---

## 3. Emotional Experience (User Perspective)
- Felt **no warmth** or emotional support in the interface
- Intake questions felt **clinical and cold**
- Would have benefited from **small reassurances** along the way
- Unsure after finishing: *"Did I do it right? What happens now?"

---

## 4. Opportunities (Where AI Should Intervene)
| Moment | AI Function | Outcome |
|--------|-------------|---------|
| Early intake | AI-guided conversational reflection | Parent feels heard and supported
| Clinical screener interpretation | AI translates scores → plain language | Reduces fear, increases understanding
| Insurance upload | OCR extraction + cost preview | Removes friction + drop-off
| Contextual FAQ | Inline reassurance and explanations | Builds confidence while filling forms
| Final summary | Clear next steps + timeline | Improves follow-through + trust

---

## 5. Desired Tone for AI
**Tone Selected:** B. Reassuring Parenting Coach

**Voice characteristics:**
- Warm
- Supportive
- Non-medical
- Validating, not diagnosing

Example tone:
> "Thank you for sharing that.  we’ll guide you through it together."

---

## 6. Proposed New Flow (High Level)
```
Step 1 — Warm Welcome + Orientation (sets expectations + reassurance)
Step 2 — Parent Story Intake (AI conversation)
Step 3 — Clinical Screener (with emotional framing + interpretation)
Step 4 — Insurance Upload + Auto-Extraction + Cost Transparency
Step 5 — Scheduling + Clear "What Happens Next" Summary
```

---

## 7. Next Steps
- ✅ Create UX Flow diagram (Mermaid)
- ✅ Define AI conversation prompts and transitions
- ✅ Design insurance OCR + validation workflow
- ✅ Write final PRD + architecture.md
- ✅ Generate task breakdown for Rails + Next.js
- ✅ Integrate test data from client-provided CSV files
- ✅ Update database schema to match production data structure
- ✅ Implement real therapist matching with actual data
- ⏳ Complete test data import and validation
- ⏳ Update frontend to use real therapist and organization data


## 6. Functional Requirements — Implementation Plan

## 7. Feature-to-Metric Impact Mapping

| Feature | What It Does | Which Goal It Moves | Why It Works |
|--------|--------------|--------------------|--------------|
| **AI-Powered Assessment (Reassuring Parenting Coach tone)** | Guides parents through describing concerns and emotional context in a conversational way | **Increase Service Requests**, **Higher NPS**, **Retention** | Parents feel understood → Less shame and overwhelm → They *continue* the process and are more confident therapy will help. |
| **Streamlined Multi-Step Flow with Progress Indicator** | Breaks the experience into small, predictable steps | **Onboarding Completion Rate +40%**, **Time Efficiency** | Reduces cognitive load. Parents know where they are and how much is left, lowering "I’ll finish this later" abandonment. |
| **Insurance Card OCR + Auto-Fill** | Auto-extracts carrier, member ID, group # | **Reduce Drop-Off at Insurance by 50%** | Removes the highest friction point—manual form entry requiring lookup and mental effort. |
| **Cost Estimation Tool** | Shows expected coverage + out-of-pocket costs range | **Increase Completion + Reduce Anxiety** | Parents fear surprise costs → transparent preview builds trust → fewer abandon before scheduling. |
| **AI Emotional Support Prompts & Inline FAQ** | Gives reassurance, normalizes experience, answers questions | **Higher NPS**, **Completion Rate**, **Retention** | Parents are scared and overwhelmed. Emotional containment keeps them regulated enough to finish onboarding. |
| **AI-Assisted Scheduling & Therapist Matching** | Matches based on availability + needs | **Completion Rate** + **Service Requests ↑** | Reduces the final decision friction (“Will we get someone who fits?”) and lowers uncertainty. |
| **Post-Onboarding “What Happens Next” Page + SMS/Email Summary** | Clear next steps & timeline expectations | **Retention +20%**, **Higher NPS** | Removes ambiguity → increases follow-through into first session. |
| **Self-Help & Stress Resources (P2)** | Gives parents immediate coping tools | **NPS**, **Retention** | Makes Daybreak feel supportive *before* therapy even starts. This strengthens trust and follow-through. |

### P0: Must-have

**AI-Powered Assessment Module**
- Delivered via guided AI conversational intake (Tone: Reassuring Parenting Coach)
- Collects context and emotional narrative BEFORE clinical screeners
- Outputs structured summary (symptoms, duration, context) stored to intake_data JSON column
- Transitions smoothly into PHQ/GAD with supportive framing

**Streamlined Onboarding Flow**
- Replaces long single-page forms with step-by-step progress wizard
- Inline emotional reassurance + real-time FAQs powered by small LLM
- Forms are broken into: Child Info → Parent Consent → AI Intake → Wellbeing Screeners → Insurance → Scheduling

**Enhanced Scheduling Module**
- Parent selects availability windows, not specific therapists
- Matching algorithm suggests 2–4 therapists automatically
- Parent may optionally choose from recommended matches

### P1: Should-have

**Image-to-Text Insurance Submission (OCR)**
- Upload card → OCR auto-populates payer, member ID, group ID
- Parent only confirms or corrects

**Cost Estimation Tool**
- Once insurance is parsed → run eligibility check
- Display estimated out-of-pocket range before scheduling

**Support Interface (Real-time Assistance)**
- Floating “Need help?” chat entry point
- Escalates to human staff if AI cannot resolve request

### P2: Nice-to-have

**Emotional Support Content**
- short, empathetic supportive micro-messages at stress points
- e.g., “Many parents feel uncertain here. You’re doing your best.”

**Self-Help Resources**
- On completion: present optional resources (articles, coping tools)
- Helps parents feel empowered while waiting for match


---

# Project Setup & Architecture — Decisions & Plan

## Source of Truth
- **Standalone system** (no existing Daybreak systems to integrate now)
- **Monorepo** with Rails (API) + Next.js (web)
- **AI provider:** OpenAI (GPT‑4o / GPT‑4o‑mini for cost control)
- **Clinical screeners:** Custom set, **real‑time** AI interpretation
- **OCR:** OpenAI Vision (card photo → structured JSON); fallback to manual entry
- **Cost Estimation:** Placeholder service (rule‑based; later replace with payer integrations)

## Monorepo Layout
```
root/
├─ apps/
│  ├─ api/                # Rails 8, API‑only, GraphQL (graphql‑ruby), Sidekiq
│  └─ web/                # Next.js 15 (App Router), React 18, Tailwind, shadcn/ui
├─ packages/
│  ├─ shared-types/       # Zod/TypeScript schemas mirroring GraphQL types
│  ├─ prompts/            # Prompt templates + tests (Vitest)
│  └─ ui/                 # (optional) shared UI components
├─ infra/
│  ├─ docker/             # Dockerfiles (api, web, worker)
│  └─ terraform/          # (later) AWS + Aptible configs
├─ scripts/               # DX, db seeders, smoke tests
└─ README.md
```

## High‑Level Architecture
```mermaid
flowchart TD
  A[Web (Next.js)] -- GraphQL --> B[(Rails API)]
  subgraph AI
    C[AI Intake Service
(OpenAI SDK)]
    D[Vision OCR Extractor]
  end
  B <--> C
  B <--> D
  B --- E[(PostgreSQL)]
  B --- F[(Redis)]
  B --- G[Sidekiq Workers]
  G --> H[Email/SMS (Postmark/Twilio)]
  B --> I[Audit Log]
  A <-- Webhooks/Realtime --> B
```

## Core Services (how they hit Functional Requirements)
- **AI Intake Service (P0):** conversational assessment in Tone **B (Reassuring Parenting Coach)**; streams assistant messages; emits `intake_summary` + optional `flags` (risk cues) in real time. Drives: ↑Service Requests, ↑Completion.
- **Onboarding Flow Service (P0):** orchestrates steps, saves progress, and shows progress bar + ETA + save/resume. Drives: ↑Completion, 15‑min target.
- **Scheduling Matcher (P0):** basic rules engine (availability ∩ clinician windows ∩ language ∩ grade range). Option **B** (AI‑guided suggestions) recommended. Drives: ↓time‑to‑first‑session, ↑Retention.
- **Vision OCR (P1):** image → JSON extraction for insurance data; confidence scores; low‑confidence fields prompt inline confirmation. Drives: ↓Insurance drop‑off by 50%.
- **Cost Estimator (P1):** rules table by payer plan type (HMO/PPO), region, and CPT code bundle → range (e.g., $X–$Y). Drives: ↑Trust, ↑Completion.
- **Support Chat (P1):** in‑flow help; AI FAQ first, escalate to human inbox. Drives: ↑NPS.
- **Emotional Support Content (P2):** micro‑copy + short reads surfaced by context (e.g., “talking to your teen about therapy”). Drives: ↑NPS, ↑Retention.

## Data Model (Updated with Test Data Integration)

### Core Onboarding Tables
- **parents**(id, email, phone, first_name, last_name, preferred_name, middle_name, title, preferred_language, preferred_pronoun, legal_gender, birthdate, address fields, healthie_id, account_status, auth_provider, role, system_labels, created_at, updated_at)
- **students**(id, parent_id FK, first_name, last_name, date_of_birth, grade, school, language, gender_identity, address, created_at, updated_at)
- **onboarding_sessions**(id, parent_id, student_id, status[draft|active|completed|abandoned], current_step, eta_seconds, started_at, completed_at, created_at, updated_at)
- **intake_messages**(id, session_id, role[user|assistant|system], content, de_identified_content, created_at)
- **intake_summaries**(id, session_id, concerns_json, goals_json, risk_flags_json, summary_text, created_at)
- **screeners**(id, key, title, version, items_json, created_at, updated_at)
- **screener_responses**(id, session_id, screener_id, answers_json, score, interpretation_text, created_at)
- **questionnaires**(id, subject_id FK[students], respondent_id FK[parents], score, started_at, completed_at, question_answers JSONB, type, language_of_completion, created_at, updated_at)
- **insurance_cards**(id, session_id, front_image_url, back_image_url, ocr_json, confidence_json, created_at)
- **insurance_policies**(id, session_id, payer_name, member_id ENCRYPTED, group_id, group_number ENCRYPTED, plan_type, plan_holder_first_name, plan_holder_last_name, plan_holder_dob, plan_holder_country, plan_holder_state, plan_holder_city, plan_holder_street_address, plan_holder_zip_code, plan_holder_legal_gender, front_card_url, back_card_url, insurance_company_name, kind, level, eligibility, openpm_insurance_organization_id, openpm_coverage_id, openpm_insurance_organization_name, verified_at, created_at, updated_at)
- **cost_estimates**(id, session_id, min_cost_cents, max_cost_cents, basis, created_at)
- **availability_windows**(id, owner_type[Parent|Student|Therapist], owner_id, rrule, availability_json JSONB, start_date, end_date, created_at, updated_at)
- **appointments**(id, session_id FK, student_id FK, therapist_id FK, scheduled_at, duration_minutes, status[scheduled|confirmed|completed|cancelled|no_show], notes, created_at, updated_at)
- **audit_logs**(id, actor_id, actor_type, action, entity_type, entity_id, before_json, after_json, ip_address, user_agent, created_at)

### Therapist/Clinician Management
- **therapists**(id, healthie_id, email, first_name, last_name, preferred_name, middle_name, phone, bio, specialties array, languages array, modalities array, ethnicity, gender, sexual_orientation, religion, npi_number, licenses array, licensed_states array, supervisor_id FK, capacity_total, capacity_filled, capacity_available, employment_type, clinical_role, profile_data JSONB, created_at, updated_at)
- **clinician_credentialed_insurances**(id, therapist_id FK, credentialed_insurance_id FK, created_at, updated_at) — many-to-many join table

### Organization & Contract Management
- **organizations**(id, parent_organization_id FK[self-referential], kind enum[district=1|school=2], slug, name, tzdb, market_id, internal_name, config JSONB, enabled_at, created_at, updated_at)
- **contracts**(id, effective_date, end_date, services array, terms JSONB, contract_url, created_at, updated_at)
- **org_contracts**(id, organization_id FK, contract_id FK, created_at, updated_at) — join table

### Insurance Credentialing
- **credentialed_insurances**(id, name, country, state, line_of_business, legacy_names array, network_status, parent_credentialed_insurance_id FK[self-referential], open_pm_name, created_at, updated_at)

### Referrals & Relationships
- **referrals**(id, submitter_id FK[parents], organization_id FK, service_kind, concerns, data JSONB, contract_id FK, terms_kind, appointment_kind, planned_sessions, collect_coverage, allowed_coverage array, collection_rule, self_responsibility_required, care_provider_requirements array, referred_at, ready_for_scheduling_at, scheduled_at, onboarding_completed_at, enrolled_at, disenrolled_at, intake_id, tzdb, system_labels array, created_at, updated_at)
- **referral_members**(id, referral_id FK, user_id FK, role, data JSONB, created_at, updated_at) — join table
- **kinships**(id, user_0_id FK, user_1_id FK, kind enum, user_0_label, user_1_label, guardian_can_be_contacted boolean, created_at, updated_at) — parent-child relationships
- **memberships**(id, user_id FK, organization_id FK, census_person_id, profile_data JSONB, created_at, updated_at) — user-organization relationships

### Documents & Content
- **documents**(id, version, label, checkboxes, version_date, urls JSONB[multi-language], names JSONB[multi-language], created_at, updated_at) — consent forms, policies, etc.

### Schema Relationships
```
parents (1) --- (*) students
         |            |
         |            |-- (*) onboarding_sessions
         |                      |
         |                      |-- (*) intake_messages
         |                      |-- (1) intake_summaries
         |                      |-- (*) screener_responses
         |                      |-- (*) insurance_cards
         |                      |-- (1) insurance_policies
         |                      |-- (1) cost_estimates
         |                      |-- (*) appointments
         |
         |-- (*) kinships (user_0_id or user_1_id)
         |-- (*) memberships
         |-- (*) referrals

students (1) --- (*) questionnaires
         |
         |-- (*) appointments

therapists (1) --- (*) clinician_credentialed_insurances
            |              |
            |              |-- (*) credentialed_insurances
            |
            |-- (*) availability_windows (owner_type='Therapist')
            |-- (*) appointments
            |-- (*) supervisees (supervisor_id)

organizations (1) --- (*) org_contracts
              |              |
              |              |-- (*) contracts
              |
              |-- (*) child_organizations (parent_organization_id)
              |-- (*) memberships
              |-- (*) referrals

screeners (1) --- (*) screener_responses
```

> Note: **PHI minimization**—store only what's required; keep AI prompts **de‑identified** (see Security). Sensitive fields (member_id, group_number) are encrypted at rest using Rails encryption.

## GraphQL Surface (Updated)

### Onboarding Mutations & Queries
- `mutation startOnboarding(parentInput, studentInput) → OnboardingSession`
- `mutation aiIntakeMessage(sessionId, userText) → [AssistantDelta]` (streamed)
- `mutation streamAiIntakeMessage(sessionId, messageId) → Success` (triggers SSE stream)
- `mutation extractIntakeSummary(sessionId) → IntakeSummary`
- `mutation submitScreener(sessionId, screenerKey, answers) → ScreenerResponse`
- `mutation uploadInsuranceCard(sessionId, frontUrl, backUrl) → OCRResult`
- `mutation generatePresignedUrl(filename, fileType, contentType) → PresignedUrl`
- `mutation confirmInsurance(sessionId, fields) → InsurancePolicy`
- `mutation estimateCost(sessionId) → CostEstimate`
- `mutation matchTherapists(sessionId, criteria) → [TherapistMatch]`
- `mutation bookAppointment(sessionId, therapistId, scheduledAt) → Appointment`
- `mutation supportChatMessage(sessionId, message) → SupportMessage`
- `mutation sendOnboardingSummary(sessionId) → Success`
- `query onboardingSession(id) → OnboardingSession`
- `query availableScreeners → [Screener]`
- `query faqAnswer(question, context) → FAQAnswer`
- `query reassuranceMessage(context) → ReassuranceMessage`

### Therapist & Organization Queries (New)
- `query therapists(filters: {insuranceId, specialties, languages, availability}) → [Therapist]`
- `query therapist(id) → Therapist`
- `query organizations(parentId, kind) → [Organization]`
- `query organization(id) → Organization`
- `query contracts(organizationId) → [Contract]`

### Referral Queries (New)
- `mutation createReferral(input) → Referral`
- `mutation updateReferralStatus(referralId, status) → Referral`
- `query referrals(organizationId, status) → [Referral]`

## Prompts & Conversation Design
**System:** “You are a warm, reassuring parenting coach… Avoid diagnoses. Reflect, normalize, and guide. Short, friendly sentences.”
**Developer:** “Extract no PII; capture concerns/goals/themes internally; highlight risk cues (self‑harm, aggression, school refusal). Always reassure and explain next step.”
**User flow:** ~20 topical probes (school, sleep, friends, mood, motivation, routines). Real‑time paraphrase + optional ‘Would you like to add this?’ chips.

## Vision OCR Plan (OpenAI - Updated Schema)
- Accept JPG/PNG; send to GPT‑4o Vision with an **extraction schema** matching `insurance_policies` table:
  - Basic: payer_name, member_id, group_id, group_number, plan_type
  - Plan holder: first_name, last_name, dob, country, state, city, street_address, zip_code, legal_gender
  - Additional: insurance_company_name, kind, level, eligibility
- Return `{ data, confidence }`; render fields with inline badges: **High**, **Medium**, **Low**; require confirmation for Medium/Low; fallback: switch to manual entry with field‑level help.
- Store extracted data in `insurance_policies` table with all new fields populated.

## Cost Estimation (Placeholder - Enhanced)
- Inputs: payer_name (from `insurance_policies`), plan_type, state, session_type (intake/individual), in_network[bool]
- Uses `credentialed_insurances` table to verify network status
- Config table example: `(payer_name, plan_type, state) -> min/max` with UI copy: "This is an estimate; we'll verify and confirm before sessions begin."
- Can leverage `insurance_coverages` test data for more accurate estimates

## Scheduling (v1 - Updated with Real Data)
- Choose **Option B** (AI suggests clinician then shows times) unless specified otherwise
- **Therapist Matching Service** uses real database queries:
  - Matches based on: insurance credentialing (via `clinician_credentialed_insurances`), availability windows (from `availability_windows` with `availability_json`), specialties, languages, capacity (available > 0)
  - Returns 2–4 matched therapists with:
    - Full bios from `therapists` table
    - Match scores and rationale (e.g., "Matches after‑school hours, credentialed with your insurance, experience with anxiety + school stress")
    - Capacity status (available slots)
    - Licensed states and languages
- **Availability System** supports dual format:
  - Legacy `rrule` format for recurring patterns
  - New `availability_json` format: `[{day: 'Monday', time_blocks: [{start: '08:00:00', duration: 60}]}]`
  - Both clinician and patient availabilities stored in `availability_windows` table
- **Appointments** link to `therapists` table via foreign key (replaces UUID-only reference)

## Security, Privacy, HIPAA Posture (non‑legal, engineering plan)
- **Transport:** TLS 1.2+
- **At rest:** Postgres row‑level encryption for sensitive columns (member_id, group_number, addresses) + disk encryption
- **Secrets:** Vault/Aptible ENV secrets; rotated
- **Access:** RBAC (parent vs staff); PII/PHI scoped queries
- **Audit:** Every read/write of PHI into `audit_logs`
- **Prompt hygiene:** Strip names, exact addresses, DOB before sending to OpenAI; use stable pseudonyms within a session; store prompt+response IDs, not raw PHI
- **Data retention:** Configurable TTL for raw intake chat; summarize → then purge messages if policy requires
- **Backups:** Encrypted snapshots; tested restores
- **Vendors:** Ensure BAAs as required before enabling production PHI flows; otherwise keep PHI out of vendor calls via de‑identification

## MVP Scope & Priorities
- **Include P0 + P1** features for Day‑1 demo value
  - P0: AI Intake, Streamlined Flow (progress/ETA/save‑resume), Scheduling
  - P1: Insurance OCR + Cost Estimate + Support Chat (email/ticket fallback)
- Defer P2 content until after baseline funnel metrics

## Front-End UI Stack & MCP Integration

**UI Library:** shadcn/ui (Next.js native, accessible, themeable)
- Components are generated into the repo for full control.
- Tailwind-based styling ensures scalability and consistency.
- Works seamlessly with our Next.js App Router architecture.

**MCP (Model Context Protocol) Support:**
- We will integrate the official **Next.js MCP development server** for agent-aware UI.
- MCP allows the AI intake agent (and future agents) to:
  - Access UI state
  - Trigger UI transitions (e.g., advance onboarding steps)
  - Provide inline guidance or clarifications
  - Dynamically surface supportive microcopy at stress points

**Implementation Notes:**
- Add `.mcp.json` at project root to register the MCP development server.
- Use shadcn/ui component primitives (e.g., `Card`, `Input`, `Dialog`) for consistent onboarding UI.
- Each onboarding step will expose optional MCP “introspection hooks” for future AI-driven personalization (e.g., adaptive phrasing based on parent tone).
- MCP stays optional and additive: the onboarding remains fully functional without active agents.

**Developer Setup (reference):**
```bash
npm install shadcn/ui
npx shadcn@latest init -d
```

```json
// .mcp.json
{
  "mcpServers": {
    "next-devtools": {
      "command": "npx",
      "args": ["-y", "next-devtools-mcp@latest"]
    }
  }
}
```

---

## UX Requirements
- Progress indicator: “Step X of 5” + **ETA countdown**
- **Save/Resume** (magic link via email/SMS)
- Mobile‑first responsive layout; large tap targets; WCAG AA
- Inline AI FAQ and micro‑reassurance copy on every step
- Final **What Happens Next** page + SMS/email summary

## Milestones & PR‑Sized Tasks (Updated)

### Phase 1: Core Infrastructure ✅ (Completed)
1) **Repo & Infra** ✅
   - [API] Rails 8 API skeleton (GraphQL, Sidekiq, Redis, Postgres)
   - [WEB] Next.js 15 app scaffold + auth‑lite (magic link)
   - Docker compose for local dev; seed scripts
2) **Data & Schema** ✅
   - Migrations for core onboarding tables
   - GraphQL types, input validators (Zod)
3) **AI Intake (P0)** ✅
   - Prompt template + unit tests
   - Streaming endpoint (SSE) + UI chat panel with chips
   - Summary generator + storage
4) **Screeners (P0)** ✅
   - Custom screener model + renderer
   - Real‑time interpretation stream + plain‑language output block
5) **Insurance (P1)** ✅
   - Upload UI (front/back) + presigned S3
   - Vision extraction service + confidence UI + manual fallback
   - Policy confirmation + cost estimator
6) **Scheduling (P0)** ✅
   - Availability forms; basic matcher; suggested clinicians + slots
   - Book flow + confirmation page + email/SMS
7) **Support & Finish** ✅
   - Inline FAQ + escalate to email
   - What‑happens‑next page; save/resume flows; analytics events
8) **Security & Ops** ✅
   - Audit logging, PII masking, secrets, backup scripts
   - Basic dashboards: funnel (start→finish, insurance drop‑off), time to complete

### Phase 2: Test Data Integration (In Progress)
9) **Therapist & Organization Data Models**
   - Create `therapists` table with full profile data (specialties, languages, capacity, etc.)
   - Create `organizations` table with hierarchical structure (districts → schools)
   - Create `contracts` and `org_contracts` for organization service agreements
   - Create `credentialed_insurances` and `clinician_credentialed_insurances` for insurance credentialing
   - GraphQL types and queries for all new entities

10) **Availability System Enhancement**
    - Add `availability_json` field to `availability_windows` for day-based time blocks
    - Support dual format (rrule + JSON) for backward compatibility
    - Import clinician and patient availabilities from CSV

11) **Referrals & Relationships**
    - Create `referrals` and `referral_members` tables
    - Create `kinships` table for parent-child relationships
    - Create `memberships` table for user-organization links
    - GraphQL mutations and queries for referral management

12) **Documents & Questionnaires**
    - Create `documents` table for consent forms and policies (multi-language support)
    - Create `questionnaires` table and integrate with existing screeners
    - Update `ConsentStep` to fetch real documents from database

13) **Data Import Infrastructure**
    - Create base CSV import infrastructure with error handling and idempotency
    - Import tasks for all 16 CSV files in `devdocs/` directory
    - Master import task with dependency ordering
    - Data validation and integrity checks

14) **Service Updates for Real Data**
    - Update `TherapistMatchingService` to use real database queries
    - Update `InsurancePolicy` model with all fields from test data
    - Update `Parent` and `Student` models for test data compatibility
    - Update `Appointment` model to link to `therapists` table
    - Update `SchedulingStep` component to use real therapist data

15) **Testing & Validation**
    - Comprehensive test suite for all imported data
    - Referential integrity validation
    - Data type and relationship verification

---

